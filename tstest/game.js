(()=>{var n=class{constructor(t,e){this.x=0;this.y=0;t!==void 0&&(this.x=t),e!==void 0&&(this.y=e)}add(t){return t instanceof n?new n(this.x+t.x,this.y+t.y):new n(this.x+t,this.y+t)}subtract(t){return t instanceof n?new n(this.x-t.x,this.y-t.y):new n(this.x-t,this.y-t)}multiply(t){return t instanceof n?new n(this.x*t.x,this.y*t.y):new n(this.x*t,this.y*t)}static addVectors(t,e){return new n(t.x+e.x,t.y+e.y)}static subtractVectors(t,e){return new n(t.x-e.x,t.y-e.y)}static multiplyVectors(t,e){return new n(t.x*e.x,t.y*e.y)}static distance(t,e){return n.len(n.subtractVectors(t,e))}static normalize(t){let e=n.len(t);return new n(t.x/e,t.y/e)}static len(t){return Math.sqrt(t.x*t.x+t.y*t.y)}};var s=class{constructor(){this.mouseX=0;this.mouseY=0;document.addEventListener("mousemove",t=>{this.mouseX=t.x,this.mouseY=t.y})}start(){}update(t){this.gameObject.transform.position=new n(this.mouseX,this.mouseY)}};var i=class{constructor(){this.gameObjects=new Array}static getInstance(){return i.instance||(i.instance=new i),i.instance}addGameObject(t){this.gameObjects.indexOf(t)==-1&&this.gameObjects.push(t)}update(t){for(let e=this.gameObjects.length;e--;)this.gameObjects[e].update(t)}};var c=class{constructor(t,e,o){this.position=new n;this.isMoving=!1;t!==void 0&&(this.position.x=t),e!==void 0&&(this.position.y=e),o!==void 0&&(this.position=o)}start(){}update(t){this.isMoving&&(this.position=n.addVectors(this.position,this.direction.multiply(this.speed*t)),n.distance(this.startPosition,this.position)>=this.distance&&(this.position=this.endPosition,this.isMoving=!1))}moveTo(t,e){this.startPosition=this.position,this.endPosition=t,this.distance=n.distance(this.startPosition,t),this.speed=e/1e3,this.direction=n.normalize(n.subtractVectors(t,this.startPosition)),this.isMoving=!0}};var m=class{constructor(t){this.components=new Array;i.getInstance().addGameObject(this),this.transform=this.addComponent(new c),this.name=t||"New GameObject",this.start()}start(){console.log("Started",this.name)}update(t){for(let e=this.components.length;e--;)this.components[e].update(t)}addComponent(t){let e=t;return e.gameObject=this,this.components.indexOf(e)==-1?(this.components.push(e),e.start(),t):null}getComponent(t){for(let e=this.components.length;e--;){let o=this.components[e];if(o instanceof t)return o}return null}removeComponent(t){let e=-1;for(let o=this.components.length;o--;)this.components[o]==t&&(e=o);e!=-1&&this.components.splice(e,1)}};var h=i.getInstance(),a=.01,u=performance.now(),p=0;function l(){new m("Player").addComponent(new s),window.requestAnimationFrame(b)}function b(){let r=performance.now(),t=r-u;for(u=r,p+=t;p>=a;)h.update(a),p-=a;window.requestAnimationFrame(b)}window.onload=()=>l();})();
//# sourceMappingURL=game.js.map
