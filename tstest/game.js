(()=>{var n=class{constructor(e,t){this.x=0;this.y=0;e!==void 0&&(this.x=e),t!==void 0&&(this.y=t)}add(e){return e instanceof n?new n(this.x+e.x,this.y+e.y):new n(this.x+e,this.y+e)}subtract(e){return e instanceof n?new n(this.x-e.x,this.y-e.y):new n(this.x-e,this.y-e)}multiply(e){return e instanceof n?new n(this.x*e.x,this.y*e.y):new n(this.x*e,this.y*e)}static addVectors(e,t){return new n(e.x+t.x,e.y+t.y)}static subtractVectors(e,t){return new n(e.x-t.x,e.y-t.y)}static multiplyVectors(e,t){return new n(e.x*t.x,e.y*t.y)}static distance(e,t){return n.len(n.subtractVectors(e,t))}static normalize(e){let t=n.len(e);return new n(e.x/t,e.y/t)}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y)}};var a=class{constructor(){this.mouseX=0;this.mouseY=0;document.addEventListener("mousemove",e=>{this.mouseX=e.x,this.mouseY=e.y})}start(){}update(e){this.gameObject.transform.position=new n(this.mouseX,this.mouseY)}};var i=class{constructor(){this.gameObjects=new Array}static getInstance(){return i.instance||(i.instance=new i),i.instance}addGameObject(e){this.gameObjects.indexOf(e)==-1&&this.gameObjects.push(e)}update(e){for(let t=this.gameObjects.length;t--;)this.gameObjects[t].update(e)}};var o=class{constructor(){this.renderers=new Array;let e=document.querySelector("#canvas");if(this.gl=e.getContext("webgl2"),this.gl===null){alert("Unable to initialize WebGL. Your browser or machine may not support it.");return}}static getInstance(){return o.instance||(o.instance=new o),o.instance}addRenderer(e){this.renderers.indexOf(e)==-1&&this.renderers.push(e)}update(e){this.clearScreen();for(let t=this.renderers.length;t--;);}clearScreen(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}};var m=class{constructor(e,t,r){this.position=new n;this.isMoving=!1;e!==void 0&&(this.position.x=e),t!==void 0&&(this.position.y=t),r!==void 0&&(this.position=r)}start(){}update(e){this.isMoving&&(this.position=n.addVectors(this.position,this.direction.multiply(this.speed*e)),n.distance(this.startPosition,this.position)>=this.distance&&(this.position=this.endPosition,this.isMoving=!1))}moveTo(e,t){this.startPosition=this.position,this.endPosition=e,this.distance=n.distance(this.startPosition,e),this.speed=t/1e3,this.direction=n.normalize(n.subtractVectors(e,this.startPosition)),this.isMoving=!0}};var p=class{constructor(e){this.components=new Array;i.getInstance().addGameObject(this),this.transform=this.addComponent(new m),this.name=e||"New GameObject",this.start()}start(){console.log("Started",this.name)}update(e){for(let t=this.components.length;t--;)this.components[t].update(e)}addComponent(e){let t=e;return t.gameObject=this,this.components.indexOf(t)==-1?(this.components.push(t),t.start(),e):null}getComponent(e){for(let t=this.components.length;t--;){let r=this.components[t];if(r instanceof e)return r}return null}removeComponent(e){let t=-1;for(let r=this.components.length;r--;)this.components[r]==e&&(t=r);t!=-1&&this.components.splice(t,1)}};var h=i.getInstance(),b=o.getInstance(),c=.01,l=performance.now(),u=0;function f(){new p("Player").addComponent(new a),window.requestAnimationFrame(d)}function d(){let s=performance.now(),e=s-l;for(l=s,u+=e;u>=c;)h.update(c),u-=c;b.update(c),window.requestAnimationFrame(d)}window.onload=()=>f();})();
//# sourceMappingURL=game.js.map
