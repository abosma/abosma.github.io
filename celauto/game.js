(()=>{var n=class{constructor(){}static getInstance(){return n.instance||(n.instance=new n),n.instance}start(){}update(){}};var o=500,c=500;var l=class{constructor(t,e,i){this.w=1;this.state=0;t!==void 0&&(this.x=t),e!==void 0&&(this.y=e),i!==void 0&&(this.w=i)}};var a=class{constructor(){}static getInstance(){return a.instance||(a.instance=new a),a.instance}start(){this.displayCanvas=document.querySelector("#canvas"),this.offscreenCanvas=document.createElement("canvas"),this.displayCanvas.height=o,this.displayCanvas.width=c,this.offscreenCanvas.height=o,this.offscreenCanvas.width=c,this.displayContext=this.displayCanvas.getContext("2d"),this.offscreenContext=this.offscreenCanvas.getContext("2d"),this.toDrawPixels=[]}addPixel(t){this.toDrawPixels.includes(t)||this.toDrawPixels.push(t)}update(){this.clearScreen(),this.drawPixels(),this.displayContext.drawImage(this.offscreenCanvas,0,0,this.offscreenCanvas.width,this.offscreenCanvas.height)}clearScreen(){this.offscreenContext.fillStyle="black",this.offscreenContext.fillRect(0,0,this.displayCanvas.width,this.displayCanvas.height)}drawPixels(){for(let t=0;t<this.toDrawPixels.length;t++){let e=this.toDrawPixels[t];this.offscreenContext.fillStyle="red",this.offscreenContext.fillRect(e.x,e.y,5,5)}this.toDrawPixels=[]}};var r=class{constructor(){this.arrayWidth=0;this.arrayHeight=0;this.pixelArray=[]}static getInstance(){return r.instance||(r.instance=new r),r.instance}start(){this.arrayWidth=c,this.arrayHeight=o;for(let e=this.arrayWidth;e--;){this.pixelArray[e]=[];for(let i=this.arrayHeight;i--;)this.pixelArray[e][i]=new l(e,i)}let t=new l(250,0,1);t.state=1,this.pixelArray[250][0]=t}update(){for(let t=0;t<this.arrayWidth;++t)for(let e=0;e<this.arrayHeight;++e){if(this.pixelArray[t][e].state==0)continue;let i=e+1,s=(t+this.arrayWidth+1)%this.arrayWidth,h=(t+this.arrayWidth-1)%this.arrayWidth;if(!(h<=0||s>=this.arrayWidth||i>=this.arrayHeight)){if(this.pixelArray[t][i].state==0){this.pixelArray[t][e].y+=1,this.updatePixel(t,e,t,e+1);continue}if(this.pixelArray[s][i].state==0){this.pixelArray[t][e].x+=1,this.pixelArray[t][e].y+=1,this.updatePixel(t,e,t+1,e+1);continue}if(this.pixelArray[h][i].state==0){this.pixelArray[t][e].x-=1,this.pixelArray[t][e].y+=1,this.updatePixel(t,e,t-1,e+1);continue}}}}updatePixel(t,e,i,s){this.pixelArray[i][s]=this.pixelArray[t][e],this.pixelArray[t][e]=new l(t,e,1),a.getInstance().addPixel(this.pixelArray[i][s])}};var f=n.getInstance(),d=r.getInstance(),x=a.getInstance();function v(){d.start(),x.start(),f.start(),window.requestAnimationFrame(u)}function u(){d.update(),x.update(),f.update(),window.requestAnimationFrame(u)}window.onload=()=>v();})();
//# sourceMappingURL=game.js.map
